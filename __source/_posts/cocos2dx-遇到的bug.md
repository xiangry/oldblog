title: cocos2dx 遇到的bug
date: 2016-08-09 15:53:24
tags: 'cocos2dx'
---

###### CCSpriteCache: 创建图片的时候纹理找不到，命名有addSpriteFrame
    
cocos2dx 规则：

1. 加载了一个纹理集合后，下次重复加载并不会重复再加入一次。
2. 加载的纹理集被已全路径做为标记，加载的纹理集里面的单个纹理以纹理帧(frame)的名字作为标记。
3. 释放纹理集合的时候，纹理集被删除，相应的纹理集合里面的单个纹理帧以名字为索引删除。

相应的出现问题，当有两个纹理集合被缓存，同时这两个纹理集合里有相同名字的单个纹理，那么在内存中实际上只存储了一份帧(frame),这就是一个错误,如果同名纹理不相同那么在显示上能看出这个错误。当释放其中一个纹理集合，则内存中就把那份同名帧给删除了，如果继续使用它，就会报错。

我们在使用CCSpriteCache缓存帧的时候，应当避免在不同的纹理集合中使用相同的名字标记单个图片。
